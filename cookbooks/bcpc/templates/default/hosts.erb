# -*- mode: conf -*-
#
# Generated by Chef
#

127.0.0.1	localhost

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

# Management aliases
<% 
   @servers.each do |server| 
     ip = server['bcpc']['management']['ip']
     fqdn = server['fqdn']
     hostname = server['hostname']
     calculated_fqdn = "#{hostname}.#{node['bcpc']['domain_name']}"
     if( ip && hostname )
-%>
<%= "#{ip}  #{fqdn} #{calculated_fqdn} #{hostname}" %>
<%   end -%>
<% end -%>

# Storage aliases
<% 
   @servers.select{|s| not s.hostname.include? 'bootstrap' }.each do |server| 
     s_ip = server['bcpc']['storage']['ip']
     s_fqdn = storage_host(server.fqdn)
     s_hostname = storage_host(server.hostname)
     s_calculated_fqdn = "#{storage_host(server.hostname, server['bcpc']['domain_name'])}"
     if( s_ip && server.hostname )
-%>
<%= "#{s_ip}  #{s_fqdn} #{s_calculated_fqdn} #{s_hostname}" %>
<%   end -%>
<% end -%>

# Floating aliases
<% 
   @servers.select{|s| not s.hostname.include? 'bootstrap' }.each do |server| 
     f_ip = server['bcpc']['floating']['ip']
     f_fqdn = float_host(server.fqdn)
     f_hostname = float_host(server.hostname)
     f_calculated_fqdn = "#{float_host(server.hostname, server['bcpc']['domain_name'])}"
     if( f_ip && server.hostname )
-%>
<%= "#{f_ip}  #{f_fqdn} #{f_calculated_fqdn} #{f_hostname}" %>
<%   end -%>
<% end -%>
