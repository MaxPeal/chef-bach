################################################
#
#              Generated by Chef
#
################################################

<VirtualHost <%="#{node[:bcpc][:management][:ip]}"%>:80>
    ServerAdmin webmaster@localhost

    Include vhost-root.d/*.conf
</VirtualHost>

<VirtualHost <%="#{node[:bcpc][:management][:ip]}"%>:443>
    ServerAlias <%="#{node[:bcpc][:management][:vip]}"%>
    <% if node[:bcpc][:management][:vip] != node[:bcpc][:management][:ip] -%>
    ServerAlias <%="#{node[:bcpc][:management][:ip]}"%>
    <% end -%>

    SSLEngine on
    SSLCertificateFile <%= "#{node[:bcpc][:ssl][:pem_file]}" %>
    SSLCertificateKeyFile <%= "#{node[:bcpc][:ssl][:key_file]}" %>

    Include vhost-root.d/*.conf
    Include vhost-ssl-root.d/*.conf
</VirtualHost>
