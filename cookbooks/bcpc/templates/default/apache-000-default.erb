################################################
#
#              Generated by Chef
#
################################################

<VirtualHost <%="#{node[:bcpc][:management][:ip]}"%>:80>
    ServerAdmin webmaster@localhost

    Include vhost-root.d/*.conf
</VirtualHost>

<VirtualHost <%="#{node[:bcpc][:management][:ip]}"%>:443>
    ServerAlias <%="#{node[:bcpc][:management][:vip]}"%>
    <% if node[:bcpc][:management][:vip] != node[:bcpc][:management][:ip] -%>
    ServerAlias <%="#{node[:bcpc][:management][:ip]}"%>
    <% end -%>

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/ssl-bcpc.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-bcpc.key

    Include vhost-root.d/*.conf
    Include vhost-ssl-root.d/*.conf
</VirtualHost>
